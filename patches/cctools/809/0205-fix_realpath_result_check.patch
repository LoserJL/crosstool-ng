diff -urN a/as/driver.c b/as/driver.c
--- a/as/driver.c	2013-05-30 22:37:01.755515484 +0100
+++ b/as/driver.c	2013-05-30 22:37:01.904516747 +0100
@@ -67,7 +67,7 @@
 		    p[1] = '\0';
 	}
 	prefix = realpath(p, resolved_name);
-	if(realpath == NULL)
+	if(prefix == NULL)
 	    system_fatal("realpath(3) for %s failed", p);
 	/*
 	 * Process the assembler flags exactly like the assembler would (except
